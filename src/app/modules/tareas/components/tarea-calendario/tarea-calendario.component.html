<h2 class="titulo-calendario">ðŸ“… Calendario de tareas</h2>
<div class="filtros-fecha">
  <label>
    Fecha inicio:
    <input type="date" [(ngModel)]="fechaInicio" (change)="actualizarTareas()" />
  </label>

  <label>
    Fecha fin (opcional):
    <input type="date" [(ngModel)]="fechaFin" (change)="actualizarTareas()" />
  </label>
</div>

<div *ngIf="errorRangoFechas" class="error-fechas">
  {{ errorRangoFechas }}
</div>

<button (click)="exportarPDF()">ðŸ“„ Exportar calendario a PDF</button>
<div #contenidoExportable>

<div *ngIf="tareasPorFecha$ | async as tareasPorFecha; else cargando">
  <div *ngIf="tareasPorFecha | keyvalue as fechas">
    <div *ngFor="let grupo of fechas" class="grupo-fecha">
      <h3 class="encabezado-fecha">Fecha: {{ grupo.key }}</h3>

      <div *ngFor="let tarea of grupo.value" class="item-tarea card">
        <div class="card-body">
          <p><strong>TÃ­tulo:</strong> {{ tarea.titulo }}</p>
          <p><strong>DescripciÃ³n:</strong> {{ tarea.descripcion }}</p>
          <p><strong>CategorÃ­a:</strong> {{ tarea.categoriaNombre || 'Sin categorÃ­a' }}</p>
          <p><strong>Prioridad:</strong> {{ tarea.prioridad }}</p>
        </div>
      </div>
    </div>
  </div>
</div>
</div>

<ng-template #cargando>
  <p>ðŸ”„ Cargando tareas agrupadas por fecha...</p>
</ng-template>

